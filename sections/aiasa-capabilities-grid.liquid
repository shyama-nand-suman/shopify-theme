{% schema %}
{
  "name": "AIASA – Capabilities Grid",
  "enabled_on": { "templates": ["page"] },
  "blocks": [
    {
      "type": "card",
      "name": "Card",
      "settings": [
        { "type": "text", "id": "title", "label": "Title" },
        { "type": "textarea", "id": "description", "label": "Description" },
        { "type": "image_picker", "id": "image", "label": "Image" },
        {
          "type": "color",
          "id": "bg",
          "label": "Background",
          "default": "#b36b00"
        },
        {
          "type": "select",
          "id": "layout",
          "label": "Layout",
          "options": [
            { "value": "normal", "label": "Text + bottom image" },
            { "value": "center", "label": "Center image only" }
          ],
          "default": "normal"
        },
        { "type": "url", "id": "link", "label": "Read more link" }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "AIASA – Capabilities Grid",
      "blocks": [
        { "type": "card" },
        { "type": "card" },
        { "type": "card" },
        { "type": "card" },
        { "type": "card" },
        { "type": "card" }
      ]
    }
  ]
}
{% endschema %}

<section class="aiasa-cap-grid">
  <div class="aiasa-cap-wrapper">

    {% for block in section.blocks %}
      <div
        class="aiasa-cap-card aiasa-layout-{{ block.settings.layout }}"
        style="background: {{ block.settings.bg }};"
        {{ block.shopify_attributes }}
      >

        {% if block.settings.layout == 'normal' %}
          <div class="aiasa-cap-text">
            <h3>{{ block.settings.title }}</h3>
            <p>{{ block.settings.description }}</p>

            {% if block.settings.link != blank %}
              <a href="{{ block.settings.link }}">READ MORE</a>
            {% endif %}
          </div>
        {% endif %}

        {% if block.settings.image %}
          {% assign img = block.settings.image %}
          <img
            src="{{ img | image_url: width: 400 }}"
            width="{{ img.width }}"
            height="{{ img.height }}"
            alt=""
            class="aiasa-cap-image"
          >
        {% endif %}

      </div>
    {% endfor %}

  </div>
</section>

<style>
/* ===== SECTION ===== */
.aiasa-cap-grid {
  padding: 120px 60px;
  background: #f6f6f6;
}

/* ===== GRID ===== */
.aiasa-cap-wrapper {
  max-width: 1200px;
  margin: auto;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 30px;
}

/* ===== CARD ===== */
.aiasa-cap-card {
  position: relative;
  min-height: 360px;
  padding: 30px;
  overflow: hidden;
}

/* ===== TEXT (TOP LEFT) ===== */
.aiasa-cap-text {
  max-width: 240px;
  color: #fff;
}

.aiasa-cap-card[style*="#ffffff"] .aiasa-cap-text {
  color: #000;
}

.aiasa-cap-text h3 {
  font-size: 22px;
  font-weight: 700;
  margin-bottom: 10px;
}

.aiasa-cap-text p {
  font-size: 15px;
  line-height: 1.6;
}

.aiasa-cap-text a {
  display: inline-block;
  margin-top: 18px;
  font-size: 14px;
  font-weight: 700;
  color: inherit;
  text-decoration: none;
  border-bottom: 2px solid currentColor;
}

/* ===== IMAGE DEFAULT (BOTTOM RIGHT) ===== */
.aiasa-cap-image {
  position: absolute;
  right: 20px;
  bottom: 20px;
  max-width: 160px;
  max-height: 160px;
  object-fit: contain;
}

/* ===== CENTER IMAGE CARD ===== */
.aiasa-layout-center .aiasa-cap-image {
  left: 50%;
  top: 50%;
  right: auto;
  bottom: auto;
  transform: translate(-50%, -50%);
  max-width: 260px;
  max-height: 260px;
}

.aiasa-layout-center .aiasa-cap-text {
  display: none;
}

/* ===== MOBILE ===== */
@media (max-width: 900px) {
  .aiasa-cap-wrapper {
    grid-template-columns: 1fr;
  }
}
</style>
