{% schema %}
{
  "name": "Investor Hero",
  "enabled_on": { "templates": ["page"] },
  "blocks": [
    {
      "type": "slide",
      "name": "Hero Slide",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Hero image" },
        { "type": "text", "id": "tag", "label": "Top tag", "default": "PRESS RELEASE" },
        {
          "type": "textarea",
          "id": "heading",
          "label": "Main heading",
          "default": "Financial Information for the Second Quarter ended September 30, 2025"
        },
        { "type": "text", "id": "btn", "label": "Button text", "default": "READ MORE" },
        { "type": "url", "id": "link", "label": "Button link" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Investor Hero",
      "blocks": [
        { "type": "slide" },
        { "type": "slide" },
        { "type": "slide" },
        { "type": "slide" },
        { "type": "slide" }
      ]
    }
  ]
}
{% endschema %}

<section class="inv-hero">
  {% for block in section.blocks %}
    <div class="inv-slide {% if forloop.first %}active{% endif %}">
      
      {{ block.settings.image | image_url: width: 2400 | image_tag:
        class: 'inv-img',
        loading: 'eager'
      }}

      <div class="inv-overlay"></div>

      <div class="inv-content">
        <span class="inv-tag">{{ block.settings.tag }}</span>
        <h1>{{ block.settings.heading }}</h1>

        {% if block.settings.link != blank %}
          <a href="{{ block.settings.link }}" class="inv-btn">
            {{ block.settings.btn }}
          </a>
        {% endif %}
      </div>

    </div>
  {% endfor %}

  <div class="inv-dots">
    {% for block in section.blocks %}
      <span class="inv-dot {% if forloop.first %}active{% endif %}" data-index="{{ forloop.index0 }}"></span>
    {% endfor %}
  </div>
</section>

<style>
/* ===== HERO ===== */
.inv-hero{
  position:relative;
  height:90vh;
  overflow:hidden;
}

/* ===== SLIDE ===== */
.inv-slide{
  position:absolute;
  inset:0;
  opacity:0;
  transform:scale(1.05);
  transition:
    opacity 1.2s ease,
    transform 6s ease;
}

.inv-slide.active{
  opacity:1;
  transform:scale(1);
  z-index:1;
}

/* IMAGE */
.inv-img{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:0;
}

/* OVERLAY */
.inv-overlay{
  position:absolute;
  inset:0;
  background:linear-gradient(
    90deg,
    rgba(0,0,0,.75) 0%,
    rgba(0,0,0,.35) 45%,
    rgba(0,0,0,0) 70%
  );
  z-index:1;
}

/* CONTENT */
.inv-content{
  position:absolute;
  top:50%;
  left:8%;
  transform:translateY(-40%);
  color:#fff;
  max-width:540px;
  z-index:2;
  opacity:0;
  transition:all .9s ease;
}

.inv-slide.active .inv-content{
  opacity:1;
  transform:translateY(-50%);
}

/* TAG */
.inv-tag{
  display:inline-block;
  background:#000;
  padding:6px 12px;
  font-size:12px;
  margin-bottom:18px;
}

/* HEADING */
.inv-content h1{
  font-size:44px;
  line-height:1.15;
  margin-bottom:26px;
  opacity:0;
  transform:translateY(20px);
  transition:all .8s ease .2s;
}

.inv-slide.active h1{
  opacity:1;
  transform:translateY(0);
}

/* BUTTON */
.inv-btn{
  display:inline-block;
  border:2px solid #fff;
  padding:12px 28px;
  color:#fff;
  text-decoration:none;
  font-weight:600;
  opacity:0;
  transform:translateY(20px);
  transition:all .8s ease .4s;
}

.inv-slide.active .inv-btn{
  opacity:1;
  transform:translateY(0);
}

.inv-btn:hover{
  background:#fff;
  color:#000;
}

/* DOTS */
.inv-dots{
  position:absolute;
  bottom:30px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:10px;
  z-index:5;
}

.inv-dot{
  width:10px;
  height:10px;
  border-radius:50%;
  background:#fff;
  opacity:.4;
  cursor:pointer;
}

.inv-dot.active{
  opacity:1;
}

/* MOBILE */
@media(max-width:900px){
  .inv-content{
    left:5%;
    right:5%;
    max-width:none;
  }
  .inv-content h1{
    font-size:28px;
  }
}
</style>

<script>
document.addEventListener("DOMContentLoaded",()=>{
  const slides=document.querySelectorAll(".inv-slide");
  const dots=document.querySelectorAll(".inv-dot");
  let index=0;

  function show(i){
    slides[index].classList.remove("active");
    dots[index].classList.remove("active");
    index=i;
    slides[index].classList.add("active");
    dots[index].classList.add("active");
  }

  dots.forEach(dot=>{
    dot.onclick=()=>show(+dot.dataset.index);
  });

  setInterval(()=>{
    show((index+1)%slides.length);
  },6000);
});
</script>
